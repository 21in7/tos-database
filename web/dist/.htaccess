RewriteEngine On

# add 404 page
ErrorDocument 404 /404.html

# force HTTPS
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R,L]

# remove www
RewriteCond %{HTTP_HOST} ^www.tos.guru$ [NC]
RewriteRule ^(.*)$ https://tos.guru/$1 [R=301,L]

# cache CSS, JS and Images for 1 month
<filesMatch "(?!.*(lib\.css|lib\.js))(^.*\.(css|js|gif|ico|jpg|jpeg|png)$)">
  Header set Cache-Control "max-age=2592000, public"
</filesMatch>

# cache CSV, JSON, static dependencies for 1 week
<filesMatch ".(csv|json|lib\.css|lib\.js)$">
  Header set Cache-Control "max-age=604800, public"
</filesMatch>
